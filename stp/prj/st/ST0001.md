---
verblock: "20 Mar 2025:v0.1: Matthew Sinclair - Updated via STP upgrade"
stp_version: 1.0.0
status: Started 
created: 20250322
completed: 
---
# ST0001: Reconciling Arca.Config with Elixir Registry

I have a question regarding Arca.Config and the Elixir Registry.

Arca.Config has three requirements:

1. Provide a unified way to store and retrieve runtime configuration params in a dot file that is automatically hydrated at runtime and provided to the app.
2. Allow an app to easily write back config changes so they are persisted back to the config file and available on subsequent soo invocations.
3. Provide an easy to use dictionary lookup mechanism to access the configuration data via a simple programmatic interface.

Elixir Registry provides a robust key/value store for runtime process discovery. It uses standard Elixir patterns and idioms, is thread-safe, robust, and scalable.

It feels like there’s some overlap between the two, or at least, that the runtime access components of Arca.Config should probably be implemented using Registry.

I want to revise Arca.Config and bring it up to be in line with modern, idiomatic, pure functional Elixir. In that process, I want to explore the relationship between Config and Registry and make sure that if there is functional overlap that the integration is coherent and well designed.

Arca.Config also needs some love. It is not well written and does not exhibit a good functional design.

Therefore, the purpose of this steel thread is to support upgrading Config to be pure functional idiomatic Elixir. And then, to the extent that it makes sense, to integrate it with Registry.

Do the following:

- Explore and evaluate the current Arca.Config codebase
- Consider its basic requirements (configuration file management, runtime hydration, runtime read/write access)
- Reflect on how those requirements overlap with Elixir’s registry
- Provide a detailed overview of suggested changes to Arca.Config in line with best practice functional and idiomatic Elixir

Capture the analysis in ST00##_analysis.md.

Write up a detailed implementation plan with step by step check points and capture that in ST00##_plqn.md.

In the implementation plan, provide a detailed prompt that can be used to give to Claude Code running on a project that uses the old version of Arca.Config.